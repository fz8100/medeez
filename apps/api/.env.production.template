# ===================================================================
# MEDEEZ V2 - PRODUCTION ENVIRONMENT TEMPLATE
# ===================================================================
# This template shows all required environment variables for production
# NEVER store actual secrets in this file - use AWS Secrets Manager
# Replace all placeholder values before deployment

# ===================================================================
# ENVIRONMENT SETTINGS
# ===================================================================
NODE_ENV=production
ENVIRONMENT=prod
LOG_LEVEL=warn
DEBUG=

# ===================================================================
# AWS CONFIGURATION
# ===================================================================
AWS_REGION=us-east-1
CDK_DEFAULT_ACCOUNT=REPLACE_WITH_PROD_ACCOUNT_ID
CDK_DEFAULT_REGION=us-east-1

# DynamoDB Configuration
DYNAMO_TABLE_NAME=${ssm:/medeez/prod/dynamo/table-name}
DYNAMO_ENDPOINT=
USE_LOCAL_DYNAMODB=false

# S3 Configuration
S3_BUCKET_NAME=${ssm:/medeez/prod/s3/bucket-name}
S3_ENDPOINT=
USE_LOCAL_S3=false

# KMS Configuration
KMS_KEY_ID=${ssm:/medeez/prod/kms/key-id}
KMS_KEY_ALIAS=alias/medeez-prod-key

# ===================================================================
# COGNITO AUTHENTICATION
# ===================================================================
COGNITO_USER_POOL_ID=${ssm:/medeez/prod/cognito/user-pool-id}
COGNITO_CLIENT_ID=${ssm:/medeez/prod/cognito/user-pool-client-id}
COGNITO_REGION=us-east-1
COGNITO_DOMAIN=medeez-auth.auth.us-east-1.amazoncognito.com

# JWT Configuration - Retrieved from AWS Secrets Manager
JWT_SECRET=${secretsmanager:medeez-prod-jwt-secret:SecretString}
JWT_EXPIRATION=3600
JWT_REFRESH_EXPIRATION=604800

# ===================================================================
# API CONFIGURATION
# ===================================================================
API_BASE_URL=https://api.medeez.com
API_VERSION=v1
API_PORT=443
API_HOST=0.0.0.0

# CORS Configuration
CORS_ORIGINS=https://medeez.com,https://www.medeez.com,https://book.medeez.com
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# ===================================================================
# WEB APPLICATION
# ===================================================================
WEB_BASE_URL=https://medeez.com
WEB_PORT=443

# ===================================================================
# DATABASE CONFIGURATION
# ===================================================================
# PostgreSQL (RDS for audit logs)
DATABASE_URL=${secretsmanager:medeez-prod-database-url:SecretString}
DB_HOST=${secretsmanager:medeez-prod-database:host}
DB_PORT=${secretsmanager:medeez-prod-database:port}
DB_NAME=${secretsmanager:medeez-prod-database:dbname}
DB_USER=${secretsmanager:medeez-prod-database:username}
DB_PASSWORD=${secretsmanager:medeez-prod-database:password}
DB_SSL=true
DB_POOL_MIN=5
DB_POOL_MAX=20

# Connection Pool Settings
DB_CONNECTION_TIMEOUT=30000
DB_IDLE_TIMEOUT=60000
DB_ACQUIRE_TIMEOUT=120000

# ===================================================================
# EMAIL SERVICE CONFIGURATION (SES)
# ===================================================================
SES_REGION=us-east-1
SES_FROM_EMAIL=noreply@medeez.com
SES_FROM_NAME=Medeez
SES_REPLY_TO_EMAIL=support@medeez.com
SES_CONFIGURATION_SET=medeez-prod-config-set

# Email Templates - Retrieved from SSM Parameter Store
WELCOME_EMAIL_TEMPLATE_ID=${ssm:/medeez/prod/ses/welcome-template}
INVITATION_EMAIL_TEMPLATE_ID=${ssm:/medeez/prod/ses/invitation-template}
PASSWORD_RESET_TEMPLATE_ID=${ssm:/medeez/prod/ses/password-reset-template}
APPOINTMENT_REMINDER_TEMPLATE_ID=${ssm:/medeez/prod/ses/reminder-template}

# ===================================================================
# FILE STORAGE CONFIGURATION
# ===================================================================
MAX_FILE_SIZE=52428800
ALLOWED_FILE_TYPES=pdf,doc,docx,txt,jpg,jpeg,png,gif
UPLOAD_PATH=/tmp/uploads
FILE_EXPIRY_HOURS=48

# Image Processing
THUMBNAIL_WIDTH=150
THUMBNAIL_HEIGHT=150
IMAGE_QUALITY=85

# ===================================================================
# SECURITY CONFIGURATION
# ===================================================================
# Encryption - Retrieved from AWS Secrets Manager
ENCRYPTION_ALGORITHM=AES-256-GCM
ENCRYPTION_KEY=${secretsmanager:medeez-prod-encryption-key:SecretString}
HASH_ROUNDS=15

# Session Configuration
SESSION_SECRET=${secretsmanager:medeez-prod-session-secret:SecretString}
SESSION_TIMEOUT=3600000
SESSION_SECURE=true

# HIPAA Compliance
PHI_ENCRYPTION_ENABLED=true
AUDIT_LOGGING_ENABLED=true
DATA_RETENTION_DAYS=2555

# ===================================================================
# MONITORING AND LOGGING
# ===================================================================
# CloudWatch
CLOUDWATCH_LOG_GROUP=/aws/lambda/medeez-prod-api
CLOUDWATCH_LOG_RETENTION_DAYS=90
CLOUDWATCH_REGION=us-east-1

# Application Monitoring
ENABLE_METRICS=true
METRICS_INTERVAL=60000
PERFORMANCE_MONITORING=true

# Error Tracking
SENTRY_DSN=${secretsmanager:medeez-prod-sentry:dsn}
SENTRY_ENVIRONMENT=production
SENTRY_RELEASE=${ssm:/medeez/prod/release-version}

# ===================================================================
# THIRD-PARTY INTEGRATIONS
# ===================================================================
# Twilio (SMS/Voice) - Retrieved from AWS Secrets Manager
TWILIO_ACCOUNT_SID=${secretsmanager:medeez-prod-twilio:account_sid}
TWILIO_AUTH_TOKEN=${secretsmanager:medeez-prod-twilio:auth_token}
TWILIO_PHONE_NUMBER=${secretsmanager:medeez-prod-twilio:phone_number}
TWILIO_WEBHOOK_URL=https://api.medeez.com/api/v1/webhooks/twilio

# Google Calendar Integration
GOOGLE_CLIENT_ID=${secretsmanager:medeez-prod-google:client_id}
GOOGLE_CLIENT_SECRET=${secretsmanager:medeez-prod-google:client_secret}
GOOGLE_REDIRECT_URI=https://medeez.com/auth/google/callback
GOOGLE_SCOPES=https://www.googleapis.com/auth/calendar

# Stripe Payment Processing
STRIPE_PUBLISHABLE_KEY=${secretsmanager:medeez-prod-stripe:publishable_key}
STRIPE_SECRET_KEY=${secretsmanager:medeez-prod-stripe:secret_key}
STRIPE_WEBHOOK_SECRET=${secretsmanager:medeez-prod-stripe:webhook_secret}
STRIPE_WEBHOOK_URL=https://api.medeez.com/api/v1/webhooks/stripe

# Paddle Subscription Management
PADDLE_VENDOR_ID=${secretsmanager:medeez-prod-paddle:vendor_id}
PADDLE_API_KEY=${secretsmanager:medeez-prod-paddle:api_key}
PADDLE_PUBLIC_KEY=${secretsmanager:medeez-prod-paddle:public_key}
PADDLE_SANDBOX=false
PADDLE_WEBHOOK_URL=https://api.medeez.com/api/v1/webhooks/paddle

# ===================================================================
# FEATURE FLAGS
# ===================================================================
FEATURE_PATIENT_PORTAL=true
FEATURE_TELEHEALTH=true
FEATURE_BILLING=true
FEATURE_CLAIMS=true
FEATURE_ANALYTICS=true
FEATURE_MOBILE_APP=true
FEATURE_AI_ASSISTANT=false

# ===================================================================
# CACHING CONFIGURATION
# ===================================================================
# ElastiCache Redis
REDIS_URL=${secretsmanager:medeez-prod-redis:url}
REDIS_HOST=${secretsmanager:medeez-prod-redis:host}
REDIS_PORT=${secretsmanager:medeez-prod-redis:port}
REDIS_PASSWORD=${secretsmanager:medeez-prod-redis:password}
REDIS_DB=0
REDIS_TTL=3600

# Cache Settings
ENABLE_CACHING=true
CACHE_TTL=3600
CACHE_PROVIDER=redis

# ===================================================================
# WEBHOOK CONFIGURATION
# ===================================================================
WEBHOOK_SECRET=${secretsmanager:medeez-prod-webhook-secret:SecretString}
WEBHOOK_TIMEOUT=30000
WEBHOOK_RETRY_COUNT=5
WEBHOOK_RETRY_DELAY=10000

# ===================================================================
# BACKUP AND RECOVERY
# ===================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=365
BACKUP_S3_BUCKET=${ssm:/medeez/prod/s3/backup-bucket-name}

# Cross-region backup
BACKUP_CROSS_REGION=true
BACKUP_SECONDARY_REGION=us-west-2

# ===================================================================
# PRODUCTION OPTIMIZATIONS
# ===================================================================
# Performance
NODE_OPTIONS=--max-old-space-size=2048
UV_THREADPOOL_SIZE=128
PRELOAD_MODULES=true

# Security
ENABLE_HELMET=true
TRUST_PROXY=true
SECURE_COOKIES=true
SAME_SITE_COOKIES=strict

# ===================================================================
# HEALTH CHECK CONFIGURATION
# ===================================================================
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=10000
HEALTH_CHECK_ENDPOINTS=database,redis,s3,ses,cognito

# Load Balancer Health Check
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_GRACE_PERIOD=30

# ===================================================================
# SCALING CONFIGURATION
# ===================================================================
# Lambda Configuration
LAMBDA_MEMORY_SIZE=1024
LAMBDA_TIMEOUT=30
LAMBDA_RESERVED_CONCURRENCY=100
LAMBDA_PROVISIONED_CONCURRENCY=10

# API Gateway
API_GATEWAY_THROTTLE_RATE=1000
API_GATEWAY_THROTTLE_BURST=2000
API_GATEWAY_CACHE_ENABLED=true
API_GATEWAY_CACHE_TTL=300

# ===================================================================
# COMPLIANCE AND AUDIT
# ===================================================================
AUDIT_LOG_RETENTION_DAYS=2555
PHI_ACCESS_LOG_ENABLED=true
FAILED_LOGIN_ATTEMPTS_MAX=5
ACCOUNT_LOCKOUT_DURATION=3600
PASSWORD_HISTORY_COUNT=10

# Data Location and Residency
DATA_RESIDENCY_REGION=us-east-1
CROSS_BORDER_DATA_TRANSFER=false
DATA_LOCALIZATION_REQUIRED=true

# ===================================================================
# DISASTER RECOVERY
# ===================================================================
DR_ENABLED=true
DR_REGION=us-west-2
RTO_MINUTES=15
RPO_MINUTES=5

# Backup Verification
BACKUP_VERIFICATION_ENABLED=true
BACKUP_RESTORE_TEST_FREQUENCY=weekly

# ===================================================================
# COST OPTIMIZATION
# ===================================================================
# Auto-scaling
ENABLE_AUTO_SCALING=true
MIN_CAPACITY=2
MAX_CAPACITY=100
TARGET_UTILIZATION=70

# Resource Optimization
ENABLE_SPOT_INSTANCES=false
OPTIMIZE_LAMBDA_MEMORY=true
ENABLE_S3_INTELLIGENT_TIERING=true

# ===================================================================
# NOTIFICATION SETTINGS
# ===================================================================
NOTIFICATION_CHANNELS=email,sms,push,slack
EMAIL_NOTIFICATION_DELAY=0
SMS_NOTIFICATION_DELAY=0
PUSH_NOTIFICATION_DELAY=0

# Appointment Reminders
REMINDER_24H_ENABLED=true
REMINDER_2H_ENABLED=true
REMINDER_15MIN_ENABLED=true

# Alert Notifications
SLACK_WEBHOOK_URL=${secretsmanager:medeez-prod-slack:webhook_url}
PAGER_DUTY_API_KEY=${secretsmanager:medeez-prod-pagerduty:api_key}

# ===================================================================
# BUSINESS LOGIC CONFIGURATION
# ===================================================================
# Appointment Settings
APPOINTMENT_SLOT_DURATION=15
MAX_APPOINTMENTS_PER_DAY=100
CANCELLATION_WINDOW_HOURS=2
NO_SHOW_WINDOW_MINUTES=15
DOUBLE_BOOKING_ALLOWED=false

# Billing Settings
INVOICE_DUE_DAYS=30
LATE_FEE_PERCENTAGE=5
PAYMENT_PROCESSING_FEE=2.9
MINIMUM_PAYMENT_AMOUNT=5.00
AUTOMATIC_BILLING_ENABLED=true

# Subscription Limits
MAX_PATIENTS_PER_CLINIC=10000
MAX_STAFF_PER_CLINIC=50
MAX_STORAGE_GB=100
API_RATE_LIMIT_PER_MINUTE=1000

# ===================================================================
# TIMEZONE AND LOCALIZATION
# ===================================================================
DEFAULT_TIMEZONE=America/New_York
SUPPORTED_TIMEZONES=America/New_York,America/Chicago,America/Denver,America/Los_Angeles,America/Phoenix
DEFAULT_LOCALE=en-US
SUPPORTED_LOCALES=en-US,es-ES,fr-FR
DEFAULT_DATE_FORMAT=MM/DD/YYYY
DEFAULT_TIME_FORMAT=hh:mm A
DEFAULT_CURRENCY_FORMAT=USD

# ===================================================================
# PERFORMANCE MONITORING
# ===================================================================
# APM Configuration
NEW_RELIC_LICENSE_KEY=${secretsmanager:medeez-prod-newrelic:license_key}
DATADOG_API_KEY=${secretsmanager:medeez-prod-datadog:api_key}
ENABLE_APM=true

# Performance Thresholds
RESPONSE_TIME_THRESHOLD_MS=1000
ERROR_RATE_THRESHOLD=0.01
CPU_THRESHOLD=80
MEMORY_THRESHOLD=85

# ===================================================================
# CUSTOM DOMAIN AND SSL
# ===================================================================
DOMAIN_NAME=medeez.com
API_DOMAIN=api.medeez.com
PATIENT_PORTAL_DOMAIN=book.medeez.com
CERTIFICATE_ARN=${ssm:/medeez/prod/certificate-arn}
HOSTED_ZONE_ID=${ssm:/medeez/prod/hosted-zone-id}

# SSL/TLS Configuration
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
SSL_PROTOCOLS=TLSv1.2,TLSv1.3

# ===================================================================
# CONTENT DELIVERY
# ===================================================================
CDN_ENABLED=true
CDN_CACHE_TTL=86400
CDN_COMPRESSION_ENABLED=true
CDN_GZIP_ENABLED=true

# ===================================================================
# API VERSIONING
# ===================================================================
API_VERSION=v1
DEPRECATED_API_VERSIONS=
API_VERSION_HEADER=X-API-Version
MAINTAIN_BACKWARD_COMPATIBILITY=true

# ===================================================================
# MAINTENANCE MODE
# ===================================================================
MAINTENANCE_MODE_ENABLED=false
MAINTENANCE_MESSAGE="Medeez is currently undergoing scheduled maintenance. Please check back in a few minutes."
MAINTENANCE_BYPASS_IPS=

# ===================================================================
# SECRETS MANAGEMENT REFERENCES
# ===================================================================
# All secrets should be stored in AWS Secrets Manager with these names:
# - medeez-prod-jwt-secret
# - medeez-prod-encryption-key
# - medeez-prod-session-secret
# - medeez-prod-database-url
# - medeez-prod-database (structured secret with host, port, etc.)
# - medeez-prod-twilio (structured secret)
# - medeez-prod-stripe (structured secret)
# - medeez-prod-paddle (structured secret)
# - medeez-prod-google (structured secret)
# - medeez-prod-redis (structured secret)
# - medeez-prod-sentry (structured secret)
# - medeez-prod-webhook-secret
# - medeez-prod-slack (structured secret)
# - medeez-prod-pagerduty (structured secret)
# - medeez-prod-newrelic (structured secret)
# - medeez-prod-datadog (structured secret)

# ===================================================================
# END OF PRODUCTION TEMPLATE
# ===================================================================
# DEPLOYMENT CHECKLIST:
# □ Replace all placeholder values
# □ Ensure all secrets are in AWS Secrets Manager
# □ Verify all SSM parameters exist
# □ Test all integrations in staging first
# □ Enable monitoring and alerting
# □ Configure backup and disaster recovery
# □ Set up log aggregation
# □ Configure auto-scaling policies
# □ Test failover procedures
# □ Verify HIPAA compliance settings
# □ Enable audit logging
# □ Configure rate limiting
# □ Test performance under load